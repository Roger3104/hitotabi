<% if user_signed_in? %>
  <% if post.favorited?(current_user) %>
    <%= link_to post_favorites_path(post.id), method: :delete, class:"favorite-btn", id:"ajax-btn1", remote: true, data: {toggle: "tooltip", placement: "left"},  title: "行ってみたいから外す" do %>
      <i class="fas fa-map-marker-alt" aria-hidden="true" style="color: #c50202;" ></i>
    <% end %>
  <% else %>
    <%= link_to post_favorites_path(post.id), method: :post, class:"favorite-btn", id:"ajax-btn2", remote: true, data: {toggle: "tooltip", placement: "left"}, title: "行ってみたいに追加" do %>
      <i class="fas fa-map-marker-alt" aria-hidden="true" style="color: gray;"></i>
    <% end %>
  <% end %>
<% else %>
  <%= link_to new_user_session_path, class:"favorite-btn", data: {toggle: "tooltip", placement: "left"}, title: "ご利用にはログインが必要です" do %>
    <i class="fas fa-map-marker-alt" aria-hidden="true"></i>
  <% end %>
<% end %>

<!--ツールチップを非同期通信に対応させる用-->
<script>
  $(document).ready(function() {
    $('[data-toggle="tooltip"]').tooltip();
  });
  btn1 = document.getElementById('ajax-btn1')
  btn2 = document.getElementById('ajax-btn2')
  if (btn1) {
    btn1.addEventListener('click', function(){
    $(btn1).tooltip('hide');
    $(btn1).tooltip();
    });
  }
  if (btn2) {
   btn2.addEventListener('click', function(){
    $(btn2).tooltip('hide');
    $(btn2).tooltip();
    });
  }
</script>